<!-- NO hay consecutivos -->
<p-panel *ngIf="!stateFiltro.consecutivosPaginados" styleClass="steps-pnl pnl-pt">
  <p-header>
    <i class="fa fa-file-text font-size-16"></i>
    <span> Consecutivos</span>
  </p-header>
  <div class="mr-3 ml-3 mt-3 mb-3 p-2 ui-messages ui-messages-info ui-corner-all text-center">
    <span class="ui-messages-icon pi pi-info-circle"></span>
    <span class="ui-messages-detail font-size-15 ml-0">
      No se encontraron <strong>Consecutivos de Correspondencia</strong> solicitados para el usuario autenticado
    </span>
  </div>
</p-panel>

<!-- HAY consecutivos -->
<ng-container *ngIf="stateFiltro.consecutivosPaginados">

  <!-- Panel filtro - lista consecutivos -->
  <div class="ui-g mt-1">

    <!-- filtro busqueda -->
    <div class="ui-g-12 ui-md-3 p-0 pr-2">
      <admin-filtro-consecutivos></admin-filtro-consecutivos>
    </div>

    <!-- tabla consecutivos -->
    <div class="ui-g-12 ui-md-9 p-0">
      <p-table
        id="tblcc"
        #tblcc
        [value]="stateFiltro.consecutivosPaginados.registros"
        (onPage)="stateFiltro.consecutivosPaginados.scrollerListener($event)"
        [totalRecords]="stateFiltro.consecutivosPaginados.datos.cantidadTotal"
        [alwaysShowPaginator]="stateFiltro.consecutivosPaginados.datos.cantidadTotal > stateFiltro.consecutivosPaginados.rowsDefault"
        [rowsPerPageOptions]="stateFiltro.consecutivosPaginados.rowsPerPageOptions"
        [rows]="stateFiltro.consecutivosPaginados.rowsDefault"
        [responsive]="true"
        [paginator]="true"
        [lazy]="true"
        rowHover="true">

        <ng-template pTemplate="header">
          <tr class="text-center">
            <th style="width: 10%">Consecutivo</th>
            <th style="width: 30%">Nomenclatura</th>
            <th style="width: 25%">Fecha de Solicitud</th>
            <th style="width: 20%">Estado</th>
            <th style="width: 10%">Transferir</th>
            <th style="width: 5%">Editar</th>
          </tr>
        </ng-template>

        <ng-template pTemplate="body" let-consecutivo>
          <tr [pSelectableRow]="consecutivo">
            <td class="text-center">
              <p class="mb-0 font-weight-bold" [ngClass]="{'clr-activo': consecutivo.idEstado === stateFiltro.ID_ACTIVO, 'clr-anulado': consecutivo.idEstado === stateFiltro.ID_ANULADO}">
                {{ consecutivo.consecutivo }}
              </p>
            </td>
            <td class="text-center font-weight-bold">
              {{ consecutivo.nomenclatura }}
            </td>
            <td class="text-center">{{ consecutivo.fechaSolicitud }}</td>
            <td class="text-center">
              <button (click)="activarAnularConsecutivo(consecutivo)" *ngIf="consecutivo.idEstado === stateFiltro.ID_ACTIVO" type="button" class="btn btn-success btn-sm btn-activo w-70-px">Activo</button>
              <button (click)="activarAnularConsecutivo(consecutivo)" *ngIf="consecutivo.idEstado === stateFiltro.ID_ANULADO" type="button" class="btn btn-danger btn-sm btn-anulado w-70-px">Anulado</button>
            </td>
            <td class="text-center">
              <button (click)="abrirModalTransferir(consecutivo)" type="button" class="btn btn-sm btn-round-table btn-pup">
                <i class="fa fa-users icon-round-table font-size-14"></i>
              </button>
            </td>
            <td class="text-center">
              <button type="button" class="btn btn-sm btn-round-table btn-round-edit">
                <i class="pi pi-pencil icon-round-edit font-size-22"></i>
              </button>
            </td>
          </tr>
        </ng-template>

        <ng-template pTemplate="emptymessage">
          <tr>
            <td [attr.colspan]="6">
              <div class="mr-2 ml-2 mt-2 mb-2 ui-messages ui-messages-info ui-corner-all p-1">
                <span class="ui-messages-icon pi pi-info-circle"></span>
                <span class="ui-messages-detail font-size-15">
                  <strong>No se encontraron consecutivos</strong> que coincidan con los criterios de filtro de búsqueda ingresado
                </span>
              </div>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</ng-container>

<!-- modal transferir consecutivo -->
<ng-container *ngIf="modalTransferir && modalTransferir.data">
  <p-dialog header="Transferir Consecutivo"
    [(visible)]="modalTransferir.isShowModal"
    modal="true"
    responsive="true"
    dismissableMask="true"
    (onHide)="modalTransferir.closeModal()">
    <div class="mx-sub-mdl">
      <p-panel styleClass="m-0 steps-pnl steps-pnl-main">
        <p-header>
          <div class="ui-g">
            <div class="ui-g-6 p-0">
              <i class="fa fa-info-circle font-size-18"></i>
              <span> Seleccione el usuario a transferir el consecutivo</span>
            </div>
            <div class="ui-g-6 p-0">
              <div class="inner-addon left-addon">
                <i class="fa fa-search-plus font-size-18 aico"></i>
                <input type="text"
                  maxlength="15"
                  adminAutofocus
                  autocomplete="off"
                  placeholder="Búsqueda por Nombre del Usuario"
                  class="ad-input ad-input-style w-100 pt-0 font-size-15" />
                <div class="focus-border"></div>
              </div>
            </div>
          </div>
        </p-header>

        <!-- Hay Usuarios-->
        <div *ngIf="usuariosTransferencia && usuariosTransferencia.length > 0">
          <p-table
            id="tblusers"
            #tblusers
            [value]="usuariosTransferencia"
            [responsive]="true"
            [paginator]="true"
            [alwaysShowPaginator]="false"
            [rows]="6"
            rowHover="true"
            styleClass="tblshort">

            <ng-template pTemplate="header">
              <tr class="text-center">
                <th class="font-new-roman font-size-14">Nombre del Usuario</th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-usuario>
              <tr [pSelectableRow]="usuario">
                <td>{{ usuario.label }}</td>
              </tr>
            </ng-template>

            <ng-template pTemplate="emptymessage">
              <tr>
                <td [attr.colspan]="1">
                  <div class="mt-2 mb-2 p-1 ui-messages ui-messages-info ui-corner-all text-center">
                    <span class="ui-messages-icon pi pi-info-circle"></span>
                    <span class="ui-messages-detail font-size-14 ml-0">
                      <strong>No se encontraron usuarios</strong> que coincidan con los criterios
                    </span>
                  </div>
                </td>
              </tr>
            </ng-template>
          </p-table>
        </div>

        <!-- No Hay Usuarios-->
        <div *ngIf="!(usuariosTransferencia && usuariosTransferencia.length > 0)" class="mr-1 ml-1 mt-2 mb-2 ui-messages ui-messages-warn ui-corner-all text-center">
          <span class="ui-messages-icon pi pi-exclamation-triangle"></span>
          <span class="ui-messages-detail font-size-15">
            <strong>No hay usuarios</strong> parametrizadas en el sistema
          </span>
        </div>
      </p-panel>
    </div>
  </p-dialog>
</ng-container>
